/*! slideshow - v0.0.0 - 2013-09-16
* Copyright (c) 2013 ; Licensed  */
var Slideshow={},log=function(a){console.log(a)};Slideshow.Main=function(){var a=null,b=null;this.init=function(){b=new Slideshow.Progress,b.init(),a=new Slideshow.SlideController,a.init(this)},this.updateProgress=function(a,c){b.update(a,c)}},Slideshow.Progress=function(){var a=null,b=null;this.init=function(){$(".slides").each(function(){c($(this))})},this.update=function(a,c){$(b).width(100*(a/c)+"%");var d="<div class='progress_label'>"+(a+1)+" / "+(c+1)+"</div>";$(b).html(d)};var c=function(c){var d="<div class='progress'><div class='progress_bar'></div></div>";$(c).append(d),a=$(".progress"),b=$(".progress_bar")}},Slideshow.Slide=function(){var a=null,b=null,c=null,d=null,e=0,f=null,g=null,h=null;this.init=function(d){a=d,e=$(d).width()/2,b=$(a).find(".step_children")[0],c=$(b).children().length,f=$(a).find("*[data-styles='true']"),f[0]&&(f=$(f)[0],g="style",h=$(f).data("target"),h=$("#"+h),$(f).keyup(function(a){i(a)}))},this.ready=function(){return c>d?($(b).find(" > *").each(function(a){a==d&&$(this).animate({opacity:"1"},500)}),d+=1,!1):!0},this.scale=function(b,c){$(a).css({width:b,height:c});var d=$(a).find(".slide_content"),e=c/2-$(d).height()/2,f=b/2-$(d).width()/2;$(d).css({"margin-top":e,"margin-left":f})},this.enter=function(){b&&(d=0,$(b).children().each(function(){$(this).css({opacity:"0.05"})})),$(a).css("visibility","visible"),$(a).addClass("front"),$(a).removeClass("previous"),$(a).removeClass("next")},this.exit=function(b,c){var d=0>b?"previous":"next";$(a).removeClass("previous"),$(a).removeClass("front"),$(a).removeClass("next"),$(a).addClass(d)};var i=function(){if("style"===g){var a=$(f).text();a=a.replace(/(<([^>]+)>)/gi,""),$(h).attr("style",a)}}},Slideshow.SlideController=function(){var a=0,b=0,c=0,d=[],e=[],f=null;this.init=function(a){f=a,e=$(".slides");for(var b=$(".slide","body"),c=Number(window.location.hash.split("#").join(""))-1,h=0;h<b.length;h++){var i=new Slideshow.Slide;i.init(b[h]),$(b[h]).css("visibility","hidden"),i.exit(c-h,0),d.push(i)}$(window).on("hashchange",function(){k()}),$(window).keyup(function(a){q(a)}),$(window).resize(function(){p()}),setTimeout(p,100),setTimeout(g,200)};var g=function(){window.location.hash?k():n(c);for(var e=0;e<d.length;e++)d[e].scale(a,b)},h=function(){d[c].scale(a,b)},i=function(){h(d[c])},j=function(a){a=Number(a);var b=c;c=a;var e=c-b;b===c&&(b=null),d[b]&&d[b].exit(e),d[c]&&d[c].enter(e),i(),f.updateProgress(c,d.length-1)},k=function(){var a=Number(window.location.hash.split("#").join(""))-1;j(a)},l=function(){if(d[c].ready()){var a=c+1;a<d.length&&n(a)}},m=function(){var a=c-1;a>-1&&n(a)},n=function(a){window.location.hash=Number(a)+1},o=function(){var a=0;$(e).hasClass("zoom-out")?($(e).removeClass("zoom-out"),$(e).find(".slide").each(function(){$(this).css({"margin-left":0})})):($(e).addClass("zoom-out"),$(e).find(".slide").each(function(){$(this).css({"margin-left":a}),a+=$(this).width()}))},p=function(){a=$(window).width(),b=$(window).height(),i()},q=function(a){if(!$("body").find("*:focus")[0]){var b=a.keyCode;switch(b){case 81:o();break;case 39:l();break;case 37:m()}}}};