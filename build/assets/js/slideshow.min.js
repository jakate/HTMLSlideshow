/*! slideshow - v0.0.0 - 2013-09-13
* Copyright (c) 2013 ; Licensed  */
var Slideshow={},log=function(a){console.log(a)};Slideshow.Main=function(){var a=null,b=null;this.init=function(){b=new Slideshow.Progress,b.init(),a=new Slideshow.SlideController,a.init(this)},this.updateProgress=function(a,c){b.update(a,c)}},Slideshow.Progress=function(){var a=null,b=null;this.init=function(){$(".slides").each(function(){c($(this))})},this.update=function(a,c){$(b).width(100*(a/c)+"%");var d="<div class='progress_label'>"+(a+1)+" / "+(c+1)+"</div>";$(b).html(d)};var c=function(c){var d="<div class='progress'><div class='progress_bar'></div></div>";$(c).append(d),a=$(".progress"),b=$(".progress_bar")}},Slideshow.Slide=function(){var a=null,b=null,c=null,d=null,e=0,f=null,g=null,h=null;this.init=function(d){a=d,e=$(d).width()/2,b=$(a).find(".step_children")[0],c=$(b).children().length,f=$(a).find("*[data-styles='true']"),f[0]&&(f=$(f)[0],g="style",h=$(f).data("target"),h=$("#"+h),$(f).keyup(function(a){i(a)}))},this.ready=function(){return c>d?($(b).find(" > *").each(function(a){a==d&&$(this).animate({opacity:"1"},500)}),d+=1,!1):!0},this.scale=function(b,c){$(a).css({width:b,height:c});var d=$(a).find(".slide_content"),e=c/2-$(d).height()/2,f=b/2-$(d).width()/2;$(d).css({"margin-top":e,"margin-left":f})},this.enter=function(){b&&(d=0,$(b).children().each(function(){$(this).css({opacity:"0.05"})})),$(a).css("visibility","visible"),$(a).addClass("front"),$(a).removeClass("previous"),$(a).removeClass("next")},this.exit=function(b,c){var d=0>b?"previous":"next";$(a).removeClass("previous"),$(a).removeClass("front"),$(a).removeClass("next"),$(a).addClass(d)};var i=function(){if("style"===g){var a=$(f).text();a=a.replace(/(<([^>]+)>)/gi,""),$(h).attr("style",a)}}},Slideshow.SlideController=function(){var a=0,b=0,c=0,d=[],e=null;this.init=function(a){e=a;for(var b=$(".slide","body"),c=Number(window.location.hash.split("#").join(""))-1,g=0;g<b.length;g++){var h=new Slideshow.Slide;h.init(b[g]),$(b[g]).css("visibility","hidden"),h.exit(c-g,0),d.push(h)}$(window).on("hashchange",function(){j()}),$(window).keyup(function(a){o(a)}),$(window).resize(function(){n()}),f(),setTimeout(n,100)};var f=function(){window.location.hash?j():m(c)},g=function(){d[c].scale(a,b)},h=function(){g(d[c])},i=function(a){a=Number(a);var b=c;c=a;var f=c-b;b===c&&(b=null),d[b]&&d[b].exit(f),d[c]&&d[c].enter(f),h(),e.updateProgress(c,d.length-1)},j=function(){var a=Number(window.location.hash.split("#").join(""))-1;i(a)},k=function(){if(d[c].ready()){var a=c+1;a<d.length&&m(a)}},l=function(){var a=c-1;a>-1&&m(a)},m=function(a){window.location.hash=Number(a)+1},n=function(){a=$(window).width(),b=$(window).height(),h()},o=function(a){if(!$("body").find("*:focus")[0]){var b=a.keyCode;switch(b){case 39:k();break;case 37:l()}}}};